@page
@using System.Globalization
@model BaseDeProjetos.Views.Home.LoggedInHomeModel
@using BaseDeProjetos.Helpers
@using System.Text.Json;
@{
}

<script src="~/js/utils/calculosDashboard.js"></script>
<script src="~/js/home/inicializarDadosHome.js"></script>

<partial name="Header" view-data="@ViewData" />
<div class="app-wrapper">
    <!-- Classe antiga era app-wrapper -->
        <div class="app-content pt-3 p-md-3 p-lg-4">
            <div class="">
                <h1 class="app-page-title">Bem vindo ao Sistema de Gestão de Inovação - SGI</h1>
            <!-- Simplificação temporária 
                <h1 class="app-page-description">Status Financeiro</h1>
                <h1 style="font-size: 1.0rem; margin-bottom: 1.0rem; font-weight: normal;" id="data"></h1>

                <div class="row g-4 mb-4">
                    <div class="col-6 card-sgi">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Volume de Negócio</h4>
                                <div class="stats-figure spinner-border text-primary" id="volumeNegocios"></div>
                            </div>
                            <a class="app-card-link-mask" href="#"></a>
                        </div>
                    </div>

                    <div class="col-6 card-sgi">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Receita por Competência</h4>
                                <div class="stats-figure spinner-border text-primary" id="receita"></div>
                            </div>
                            <a class="app-card-link-mask" href="#"></a>
                        </div>
                    </div>
                    <div class="col-6 card-sgi">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Receita por Caixa</h4>
                                <div class="stats-figure spinner-border text-primary" id="investimento"></div>
                            </div>
                            <a class="app-card-link-mask" href="#"></a>
                        </div>
                    </div>
                    <div class="col-6 card-sgi">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Despesa</h4>
                                <div class="stats-figure spinner-border text-primary" id="despesas"></div>
                            </div>
                            <a class="app-card-link-mask" href="#"></a>
                        </div>
                    </div>
                    <div class="col-6 card-sgi">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Sustentabilidade</h4>
                                <div class="stats-figure spinner-border text-primary" id="sustentabilidade"></div>
                            </div>
                            <a class="app-card-link-mask" href="#"></a>
                        </div>
                    </div>
                </div>

                <h1 class="app-page-description">Status Operacional</h1>

                <div class="row g-4 mb-4">
                    <div class="col-6 card-sgi">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Prospecções Ativas</h4>
                                <div class="stats-figure spinner-border text-primary" id="prospAtivas"></div>
                            </div>
                            <a class="app-card-link-mask" href="#"></a>
                        </div>
                    </div>

                    <div class="col-6 card-sgi">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Projetos Ativos</h4>
                                <div class="stats-figure spinner-border text-primary" id="projetos"></div>
                            </div>
                            <a class="app-card-link-mask" href="#"></a>
                        </div>
                    </div>
                    <div class="col-6 card-sgi">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Colaboradores</h4>
                                <div class="stats-figure spinner-border text-primary" id="usuarios"></div>
                            </div>
                            <a class="app-card-link-mask" href="#"></a>
                        </div>
                    </div>
                    <div class="col-6 card-sgi">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Empresas com Relacionamento</h4>
                                <div class="stats-figure spinner-border text-primary" id="empresas"></div>
                            </div>
                            <a class="app-card-link-mask" href="#"></a>
                        </div>
                    </div>
                    <div class="col-6 card-sgi">
                        <div class="app-card app-card-stat shadow-sm h-100">
                            <div class="app-card-body p-3 p-lg-4">
                                <h4 class="stats-type mb-1">Satisfação do Cliente</h4>
                                <div class="stats-figure">@ViewBag.satisfacao.ToString("P1")</div>
                            </div>
                            <a class="app-card-link-mask" href="#"></a>
                        </div>
                    </div>
                </div>

                <div class="d-flex flex-row gap-4">
                    <div class="app-card app-card-chart w-50 shadow-sm">
                        <div class="app-card-header p-3">
                            <div class="row justify-content-between align-items-center">
                                <div class="col-auto">
                                    <h4 class="app-card-title">Prospecções Totais Por Linha De Pesquisa</h4>
                                </div>
                                <div class="col-auto">
                                    <div class="card-header-action">
                                        <a href="charts.html">More charts</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="app-card-body p-3 p-lg-4">
                            <div class="chart-container">
                                <canvas id="canvas-barchart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="app-card app-card-progress-list w-50 shadow-sm">
                        <div class="app-card-header p-3">
                            <div class="row justify-content-between align-items-center">
                                <div class="col-auto">
                                    <h4 class="app-card-title">Progresso das Prospecções</h4>
                                </div>
                                <div class="col-auto">
                                    <div class="card-header-action">
                                        <a asp-action="FunilDeVendas">Todas as prospecções</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="app-card-body">
                            <div class="item p-3">
                                <div class="row align-items-center">
                                    <div class="col">
                                        <div class="title mb-1 ">Ativas</div>
                                        <div class="stat-cell mb-1" id="prospAtivasGraph"></div>
                                        <div class="progress">
                                            <div class="progress-bar bg-success" role="progressbar" id="progProspAtivas" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                    <div class="col-auto">
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
                                        </svg>
                                    </div>
                                </div>
                                <a class="item-link-mask" href="#"></a>
                            </div>


                            <div class="item p-3">
                                <div class="row align-items-center">
                                    <div class="col">
                                        <div class="title mb-1 ">Com Proposta</div>
                                        <div class="stat-cell mb-1" id="prospComProposta"></div>
                                        <div class="progress">
                                            <div class="progress-bar bg-success" id="progProspComProposta" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                    <div class="col-auto">
                                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-right" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z" />
                                        </svg>
                                    </div>
                                </div>
                                <a class="item-link-mask" href="#"></a>
                            </div>

                            <div class="item p-3">
                                <div class="row align-items-center">
                                    <div class="col">
                                        <div class="title mb-1 ">Concluídas</div>
                                        <div class="stat-cell mb-1" id="prospConcluidas"></div>
                                        <div class="progress">
                                            <div class="progress-bar bg-success" id="progProspConcluidas" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="bi bi-chevron-right"></i>
                                    </div>
                                </div>
                                <a class="item-link-mask" href="#"></a>
                            </div>

                            <div class="item p-3">
                                <div class="row align-items-center">
                                    <div class="col">
                                        <div class="title mb-1 ">Planejadas</div>
                                        <div class="stat-cell mb-1" id="prospPlanejadas"></div>
                                        <div class="progress">
                                            <div class="progress-bar bg-success" id="progProspPlanejadas" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                    <div class="col-auto">
                                        <i class="bi bi-chevron-right"></i>
                                    </div>
                                </div>
                                <a class="item-link-mask" href="#"></a>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="row g-4 mb-4">
                    <div class="col-12 col-lg-6">
                    </div>

                    <div class="col-12 col-lg-12" style="display:none">
                        <figure class="highcharts-figure">
                            <div id="container"></div>
                            <p class="highcharts-description">
                                Sankey charts are used to visualize data flow and volume
                                between nodes. The wider lines indicate larger volumes.
                            </p>
                        </figure>
                    </div>


                </div>
                <div class="row g-4 mb-4">
                    <div class="col-12 col-lg-6">
                    </div>
                </div>
            </div>

        -->
    </div>
    <aside class="col-12 auth-background-col">
        <div class="auth-background-holder">
                <img src="~/register-photo-test.jpg" style="width:100%; max-height:100vh; object-fit:cover" class="img-lateral-sgi" alt="background-register-photo">
        </div>
        <div class="auth-background-mask"></div>
        <div class="auth-background-overlay p-3 p-lg-5">
                <div class="d-flex flex-column align-content-end">
                <div class="h-100"></div>
                <div class="overlay-content p-3 p-lg-4 rounded">
                    <h5 class="mb-3 overlay-title">Sistema de Gestão de Inovação</h5>
                    <div>Bem-vindo, o SGI é uma plataforma unificada para gestão de dados referentes às equipes dos Insitituto SENAI de Inovação em Química Verde (ISI-QV) e Inspeção e Integridade (ISI-II), assim como do Centro de Inovação SESI em Saúde Ocupacional (CIS-SO).</div> @* Bem-vindo ao SGI, Aqui você poderá gerenciar os dados das prospecções do nosso insituto, de maneira ampla, simples e organizada, a fim de aumentar nossa eficiência. *@
                </div>
            </div>
        </div><!--//auth-background-overlay-->
    </aside><!--//auth-background-col-->

    <partial name="Footer" />
</div>

<!-- Page Specific JS -->
<script src="~/js/app.js"></script>