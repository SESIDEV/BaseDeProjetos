@{ ViewData["Title"] = "Pessoas"; }

<partial name="Header" view-data="@ViewData" />
<div class="app-wrapper">	    
    <div class="app-content pt-3 p-md-3 p-lg-4">
        <div class="container-xl">
            
            <h1 class="app-page-title">Pessoas</h1>
            <div class="app-card shadow-sm mb-4 border-left-decoration">
                <div class="inner">
                    <div class="app-card-body p-4">
                        <div class="row gx-5 gy-3">
                            <div class="accordion" id="accordionExample">
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingOne">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                        Filtros
                                    </button>
                                    </h2>
                                    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                        <div class="accordion-body row">
                                        <div class="col">
                                                <div class="app-card shadow-sm mb-2">
                                                    <div class="app-card-header p-3">
                                                        <div class="row justify-content-between align-items-center">
                                                            <div class="col-auto">
                                                                <h4 class="app-card-title">Competências</h4>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="app-card-body p-3 p-lg-4" id="notfilt"></div>
                                                </div>

                                                <div class="app-card shadow-sm">
                                                    <div class="app-card-header p-3">
                                                        <div class="row justify-content-between align-items-center">
                                                            <div class="col-auto">
                                                                <h4 class="app-card-title">Filtradas</h4>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="app-card-body p-3 p-lg-4" id="filt">
                                                        <p class="card-text"><small class="text-muted">Filtradas</small></p>
                                                    </div>
                                                </div>
                                                
                                            </div>

                                            <div class="col">

                                                <div class="app-card shadow-sm">
                                                    <div class="app-card-header p-3">
                                                        <div class="row justify-content-between align-items-center">
                                                            <div class="col-auto">
                                                                <h4 class="app-card-title">Cargos</h4>
                                                            </div>                                                                
                                                        </div>
                                                    </div>
                                                    <div class="app-card-body p-3 p-lg-4">
                                                        <div class="mb-3 form-check">   
                                                            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                                            <label class="form-check-label" for="flexCheckDefault">
                                                                Cargo 1
                                                            </label>
                                                        </div>
                                                        <div class="mb-3 form-check">   
                                                            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                                            <label class="form-check-label" for="flexCheckDefault">
                                                                Cargo 2
                                                            </label>
                                                        </div>
                                                        <div class="mb-3 form-check">   
                                                            <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                                            <label class="form-check-label" for="flexCheckDefault">
                                                                Cargo 3
                                                            </label>
                                                        </div>                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row g-4 mb-4">
                <div>
                    <div class="app-card app-card-chart h-100 shadow-sm">
                        <div class="app-card-header p-3 border-0">
                            <h4 class="app-card-title">
                                <div class="input-group flex-nowrap">
                                    <span class="input-group-text" id="addon-wrapping">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                        </svg>
                                    </span>
                                    <select id="pessoasSelect" class="form-select" onchange="procurarPessoa(this)"></select>
                                </div>
                            </h4>
                        </div>
                        <div class="app-card-body p-4 background_principal">
                            <div class="chart-container network">
                                <div id="chart-line" style="height: 700px;"></div><!--CAMPO PRINCIPAL-->

                                <div id="user_card" class="card modal">
                                    <h5 class="card-header text-center">Cargo da Pessoa</h5>
                                    <img id="imagem-do-card"class="card-img-top">
                                    <div class="card-body">
                                        <h5 id="nome-do-card" class="card-title">Nome da Pessoa</h5>
                                        <h5 class="d-none" id="competencias"></h5>
                                        <div id="campo_competencias"></div>
                                        <br>
                                        <div id="botoes_do_card" class="d-flex gap-2 flex-column">
                                            <a href="#" class="btn app-btn-primary">Produções</a>
                                            <a href="#" class="btn app-btn-primary">Projetos</a>
                                            <a href="#" class="btn app-btn-primary">Prospecções</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <a style="color:darkslategray;" href="https://www.freepik.com/free-vector/colorful-realisitc-science-background_7410259.htm#query=colorful-realisitc-science-background&position=0&from_view=search&track=sph">Image by pikisuperstar</a> on Freepik
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>    
    <partial name="Footer" />
</div>    					

<span id="badge_competencia" class="badge text-bg-info d-none">Competencia Default</span>
<span id="badge_competencia_select" class="badge bg-secondary badge-competencia" onclick="passarComp(this)">Comp Select</span>

<style>
    
    .background_principal {
        background-image: url('https://img.freepik.com/free-vector/colorful-realisitc-science-background_52683-35481.jpg?w=2000&t=st=1672681176~exp=1672681776~hmac=c1241d6800f732ea5a1b2f5cce0185ec89491037aca4fa4902ac7ca5cc0f02a2');
        background-size: cover;
    }

    .network {
        backdrop-filter: blur(5px);
    }
    
    .badge-competencia {
        cursor: pointer;
    }
    
    .modal {
        height: 40rem;
        width: 18rem;
        display: none;
        position: absolute;
        left: 2%;
    }

    #imagem-do-card {
        padding-left: 20px;
        padding-top: 20px;
        padding-right: 20px;
    }

</style>

<script>
    window.addEventListener('load', function(){
        gerarOpcoesSelectPessoas(null,'pessoasSelect')
        fetch('/Pessoas/dados').then(response => response.json()).then(data => {montarNetwork(data)});
        listarCompetencias()
    });
</script>